<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <meta charset="UTF-8">
    <title>Customer Dashboard</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.css}">

</head>
<style>
    *{
        font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
    }
</style>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
        <p class="navbar-brand">Hello, <span th:text="${clientName}"></span>!</p>
        <form th:action="@{/logout}" method="post" class="form-inline my-2 my-lg-0">
            <button value="Logout" type="submit" class="btn btn-danger">Logout</button>
        </form>
    </div>
</nav>

<div id="message" class="alert alert-success mt-3 d-none"></div>

<main class="container mt-4">
    <div class="row">
        <div class="col-md-6">
            <div class="info">
                <h4 class="mb-3">Current Balance</h4>
                <h2 class="balance" th:text="'$' + ${balance}"></h2>
                <p class="logDate">As of <span th:text="${currentDate}"></span></p>
            </div>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="row g-4 justify-content-center">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            Deposit Money
                        </div>
                        <div class="card-body">
                            <form id="depositForm">
                                <div class="mb-3">
                                    <label for="depositAmount" class="form-label">Amount</label>
                                    <input type="number" class="form-control" id="depositAmount" name="depositAmount" min="1" step="0.05" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Deposit &rarr;</button>
                                <div id="depositError" class="mt-3 text-danger"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>


            <div class="row g-4 mt-3 justify-content-center">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            Withdraw Money
                        </div>
                        <div class="card-body">
                            <form id="withdrawForm">
                                <div class="mb-3">
                                    <label for="withdrawAmount" class="form-label">Amount</label>
                                    <input type="number" class="form-control" id="withdrawAmount" step="0.05" min="1" max="5000" name="withdrawAmount" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Withdraw &rarr;</button>
                                <div id="withdrawError" class="mt-3 text-danger"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <div class="col-md-6">
            <div class="row g-4 justify-content-center">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            Transfer Money
                        </div>
                        <div class="card-body">
                            <form id="transferForm">
                                <div class="form-group mb-3">
                                    <label for="transferTo">Transfer to</label>
                                    <input type="text" class="form-control"  id="transferTo" name="transferTo">
                                </div>
                                <div class="form-group mb-3">
                                    <label for="transferAmount">Amount</label>
                                    <input type="number" class="form-control" id="transferAmount" min="1" max="5000" step="0.05" name="transferAmount" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Transfer &rarr;</button>
                                <div id="transferError" class="mt-3 text-danger"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row g-4 mt-3 justify-content-center">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-header">
                            Close Account
                        </div>
                        <div class="card-body">
                            <form id="closeForm">
                                <div class="form-group mb-3">
                                    <label for="user">Confirm user</label>
                                    <input type="text" class="form-control" id="user" name="user" required>
                                </div>
                                <div class="form-group mb-3">
                                    <label for="pin">Confirm PIN</label>
                                    <input type="password" class="form-control" id="pin" name="pin" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Close Account &rarr;</button>
                                <div id="closeError" class="mt-3 text-danger"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4 justify-content-center m-5">
        <div class="col-md-6 text-center">
            <div class="timer">You will be logged out in <b class="timer_time">0:00</b></div>
        </div>
    </div>
</main>

<script th:src="@{/js/jquery.js}"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-sha256/0.9.0/sha256.min.js"></script> <!-- Include SHA-256 library -->
<script th:src="@{/js/customer.js}"></script>
</body>
</html>